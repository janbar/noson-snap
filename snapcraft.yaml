name: noson
version: "3.11.9.snap"
summary: noson
icon: noson.png
description: |
  The essential to control music from your SONOS devices.
  It is the fast and smart controller for your SONOS devices on Ubuntu platform.
  You can browse your music library and play track, radio or internet stream on
  any zones. You can manage zone groups, queue and playlists and fully control
  the playback. Enjoy!
grade: stable
confinement: strict
base: core18

apps:
  noson:
    command: bin/noson.launcher
    plugs:
      - unity7
      - x11
      - wayland
      - opengl
      - home
      - network
      - network-bind
      - pulseaudio
      - media-hub

parts:
  desktop-qt5-noson:
    source: https://github.com/ubuntu/snapcraft-desktop-helpers.git
    source-commit: de8dc068a05d24cea5c0438863280ab641226570
    source-subdir: qt/
    plugin: make
    make-parameters: ["FLAVOR=qt5"]
    build-packages:
      - qtbase5-dev
      - dpkg-dev
    stage-packages:
      - libxkbcommon0
      - ttf-ubuntu-font-family
      - dmz-cursor-theme
      - light-themes
      - shared-mime-info
      - libqt5gui5
      - libgdk-pixbuf2.0-0
      - libqt5svg5
      - locales-all

  noson:
    source: https://github.com/janbar/noson-app.git
    source-type: git
    source-tag: 3.11.9
    source-depth: 1
    plugin: cmake
    configflags: [-DCMAKE_INSTALL_PREFIX=/usr]
    build-packages:
      - build-essential
      - cmake
      - gettext
      - intltool
      - qtbase5-dev
      - qttools5-dev
      - qttools5-dev-tools
      - qtdeclarative5-dev
      - qtdeclarative5-dev-tools
      - qtquickcontrols2-5-dev
      - libqt5svg5-dev
      - zlib1g-dev
      - libssl-dev
      - libpulse-dev
      - libflac-dev
      - libflac++-dev
      - qml-module-qt-labs-settings
      - qml-module-qtgraphicaleffects
      - qml-module-qtqml-models2
      - qml-module-qtquick2
      - qml-module-qtquick-controls2
      - qml-module-qtquick-layouts
      - qml-module-qtquick-particles2
      - qml-module-qtquick-templates2
      - qml-module-qtquick-window2
      - libqt5svg5
    stage-packages:
      - libqt5qml5
      - libqt5quick5
      - libqt5quickcontrols2-5
      - qml-module-qt-labs-settings
      - qml-module-qtgraphicaleffects
      - qml-module-qtqml-models2
      - qml-module-qtquick2
      - qml-module-qtquick-controls2
      - qml-module-qtquick-layouts
      - qml-module-qtquick-particles2
      - qml-module-qtquick-templates2
      - qml-module-qtquick-window2
      - qttranslations5-l10n
      - libqt5svg5
      - zlib1g
      - libssl1.1
      - libpulse0
      - libflac++6v5
      - libflac8
    after: [desktop-qt5-noson]

  environment:
    source: .
    plugin: dump
    organize:
      noson.launcher: bin/noson.launcher

